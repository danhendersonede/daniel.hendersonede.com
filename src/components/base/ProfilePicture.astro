---
import { Image } from 'astro:assets';
import profileRender from '@assets/profile-render.png';
import profile from '@assets/profile.jpg';

interface Props {
  size: 'small' | 'large' | 'hero-large' | 'creative-medium';
  useRender?: boolean;
}

const { size, useRender = false } = Astro.props as Props;
const profileImage = useRender ? profileRender : profile;
---

<div id="profile-picture" class={`profile-picture ${size}`}>
  <svg width="0" height="0" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <clipPath id="blobClip" clipPathUnits="objectBoundingBox">
        <path
          d="M0.1019 0.1922C0.2025 0.0538 0.3712 -0.0122 0.5351 0.0227L0.6534 0.0479C0.7667 0.072 0.8626 0.1497 0.9123 0.2578C0.9662 0.3764 0.9591 0.5156 0.8909 0.6265L0.8448 0.7018C0.7465 0.8623 0.5664 0.9482 0.3857 0.9214L0.3029 0.9093C0.1831 0.8908 0.0946 0.8032 0.0463 0.6808C0.0152 0.6299 0.0091 0.5753 0.0156 0.5212L0.0176 0.4199C0.0245 0.3366 0.0539 0.2582 0.1019 0.1922Z"
        ></path>
      </clipPath>
    </defs>
  </svg>

  <Image
    height={size === 'small'
      ? 100
      : size === 'hero-large'
        ? 400
        : size === 'creative-medium'
          ? 300
          : 270}
    width={size === 'small'
      ? 100
      : size === 'hero-large'
        ? 400
        : size === 'creative-medium'
          ? 300
          : 270}
    src={profileImage}
    alt={useRender
      ? 'Playful 3D illustration of Daniel with spiky red hair and his German Shepherd companion, representing the creative and approachable side of design engineering'
      : 'A smiling white male with short, red hair, standing in the center of the image, wearing a stripey shirt.'}
  />
</div>

<style>
  .profile-picture {
    display: inline-block;
    position: relative;
  }

  .profile-picture img {
    object-fit: cover;
    clip-path: url(#blobClip);
    -webkit-clip-path: url(#blobClip);
  }

  .profile-picture.hero-large {
    width: clamp(280px, 35vw, 500px);
    height: clamp(280px, 35vw, 500px);
    box-shadow: var(--elevation-m);
  }

  .profile-picture.hero-large img {
    width: 100%;
    height: 100%;
  }

  .profile-picture.creative-medium {
    width: clamp(250px, 25vw, 350px);
    height: clamp(250px, 25vw, 350px);
    box-shadow: var(--elevation-m);
  }

  .profile-picture.creative-medium img {
    width: 100%;
    height: 100%;
  }

  .profile-picture.small clipPath {
    transform-origin: 100px 100px !important;
  }

  .profile-picture.large clipPath {
    transform-origin: 300px 300px !important;
  }

  .profile-picture.hero-large clipPath {
    transform-origin: center center !important;
  }

  .profile-picture.creative-medium clipPath {
    transform-origin: center center !important;
  }
</style>
